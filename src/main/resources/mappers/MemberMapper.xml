<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="flab.delideli.dao.MemberDao" >
    <insert id="joinMember" >
        INSERT INTO members (userid , password , username , phone , address)
        VALUES (#{userid} , #{password}, #{username} , #{phone} , #{address})
    </insert>

    <select id="isExistUserId" resultType = "boolean">
       SELECT EXISTS (SELECT 1 FROM members WHERE userid = #{userid})
    </select>

    <select id="checkUserId" resultType="flab.delideli.dto.MemberDTO">
        SELECT userid FROM members WHERE userid = #{userid}
    </select>

    <select id="checkPassword" resultType="flab.delideli.dto.MemberDTO">
        SELECT password FROM members WHERE password = #{password}
    </select>

    <select id="findbyUserid" resultType="flab.delideli.dto.MemberDTO">
        SELECT userid,password,username,phone,address FROM members WHERE userid = #{loginid}
    </select>

    <insert id="createSessionid" >
        INSERT INTO membersession (userid,sessionid) VALUES (#{userid}, #{sessionid})
    </insert>

    <select id="isExistUserSession" resultType="boolean">
        SELECT EXISTS (SELECT 1 FROM membersession WHERE userid = #{userid})
    </select>

    <select id="getSessionId" resultType="double">
        SELECT sessionid FROM membersession WHERE userid = #{userid}
    </select>
</mapper>